<div class="container">
  <h2>{{ modoEdicao ? 'Editar' : 'Adicionar' }} Contato</h2>
  
  <div *ngIf="carregando" class="loading">Carregando...</div>
  
  <div *ngIf="erro" class="erro">{{ erro }}</div>
  
  <form #contatoForm="ngForm" (ngSubmit)="onSubmit()" *ngIf="!carregando">
    <div class="form-group">
      <label for="nome">Nome</label>
      <input 
        type="text" 
        id="nome" 
        name="nome" 
        [(ngModel)]="contato.nome"
        required
        minlength="3"
        #nome="ngModel">
      <div *ngIf="nome.invalid && (nome.dirty || nome.touched)" class="erro-campo">
        <div *ngIf="nome.errors?.['required']">Nome é obrigatório.</div>
        <div *ngIf="nome.errors?.['minlength']">Nome deve ter pelo menos 3 caracteres.</div>
      </div>
    </div>
    
    <div class="form-group">
      <label for="email">Email</label>
      <input 
        type="email" 
        id="email" 
        name="email"
        [(ngModel)]="contato.email"
        required
        email
        #email="ngModel">
      <div *ngIf="email.invalid && (email.dirty || email.touched)" class="erro-campo">
        <div *ngIf="email.errors?.['required']">Email é obrigatório.</div>
        <div *ngIf="email.errors?.['email']">Insira um email válido.</div>
      </div>
    </div>
    
    <div class="form-group">
      <label for="telefone">Telefone</label>
      <input 
        type="tel" 
        id="telefone" 
        name="telefone"
        [(ngModel)]="contato.telefone"
        required
        #telefone="ngModel">
      <div *ngIf="telefone.invalid && (telefone.dirty || telefone.touched)" class="erro-campo">
        <div *ngIf="telefone.errors?.['required']">Telefone é obrigatório.</div>
      </div>
    </div>
    
    <div class="form-actions">
      <button type="button" routerLink="/contatos" [disabled]="enviando">Cancelar</button>
      <button type="submit" [disabled]="contatoForm.invalid || enviando">
        <span *ngIf="!enviando">{{ modoEdicao ? 'Atualizar' : 'Salvar' }}</span>
        <span *ngIf="enviando">Salvando...</span>
      </button>
    </div>
  </form>
</div>